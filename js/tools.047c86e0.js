(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tools"],{1861:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t._self._c;return e("Card",{attrs:{shadow:""},scopedSlots:t._u([{key:"title",fn:function(){return[e("Avatar",{staticStyle:{color:"#2f54eb",background:"#f0f5ff"},attrs:{icon:"md-locate",size:"small"}}),e("span",{staticClass:"ivu-pl-8"},[t._v("前端日志")])]},proxy:!0},{key:"extra",fn:function(){return[e("Tooltip",{attrs:{transfer:"",content:"导出日志",placement:"top"}},[e("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"dashed",icon:"ios-cloud-download-outline"},on:{click:t.exportLog}})],1),e("Tooltip",{attrs:{transfer:"",content:"清空日志",placement:"top"}},[e("Button",{attrs:{type:"dashed",icon:"md-trash"},on:{click:t.cleanLog}})],1)]},proxy:!0}])},[e("div",{class:"".concat(t.$config.cssPrefix,"table-no-border")},[e("Table",{ref:"table",attrs:{columns:t.columns,data:t.tableData},on:{"on-sort-change":t.changeSort},scopedSlots:t._u([{key:"type",fn:function(o){var n=o.row;return[e("Tag",{attrs:{color:"error"===n.type?"red":"blue"}},[t._v(t._s(n.type))])]}},{key:"page",fn:function(e){var o=e.row;return[t._v(t._s(o.meta.url))]}},{key:"request",fn:function(e){var o=e.row;return[t._v(t._s(o.meta.apiURL))]}},{key:"more",fn:function(o){var n=o.row;return[e("Button",{attrs:{size:"small",ghost:"",type:"primary"},on:{click:function(e){return t.viewLog(n)}}},[t._v("查看")])]}}])}),e("Page",{staticClass:"ivu-text-center",attrs:{"show-total":"","show-sizer":"","show-elevator":"",total:t.logList.length},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])},a=[],s=o("5530"),r=(o("4e82"),o("d81d"),o("fb6a"),o("9fb0")),i=o("2f62"),c={name:"AlarmLog",data:function(){var t=this;return{columns:[{title:"序号",align:"center",width:65,render:function(e,o){o.row,o.col;var n=o.index;return e("span",(t.currentPage-1)*t.pageSize+n+1)}},{title:"时间",key:"time",width:180,sortable:!0},{title:"类型",key:"type",width:100,slot:"type"},{title:"信息",key:"message"},{title:"触发页面",slot:"page"},{title:"请求地址",slot:"request"},{title:"详细信息",align:"center",width:100,slot:"more"}],tableData:[],currentPage:1,pageSize:10,timeOrder:"desc"}},computed:{logList:function(){return this.$store.state.log.logList}},watch:{logList:function(){this.changePage(this.currentPage)}},created:function(){this.changePage()},methods:Object(s["a"])(Object(s["a"])({},Object(i["d"])([r["b"]])),{},{exportLog:function(){this.logList.length?this.$refs.table.exportCsv({filename:"错误日志.csv"}):this.$Message.info("没有日志或异常")},viewLog:function(t){this.$Message.info("按F12打开控制台查看完整日志"),this.$console.capsule(this.$config.titleSuffix,"完整日志内容"),console.group("完整日志"),console.log("message: ",t.message),console.log("sources: ",t.sources),console.log("time: ",t.time),console.log("type: ",t.type),console.log("meta: ",t.meta),console.groupEnd()},changePage:function(t){var e=this;this.currentPage=t||1;var o=(this.currentPage-1)*this.pageSize,n=this.logList.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{timestamp:new Date(t.time)})})).sort((function(t,o){return"asc"===e.timeOrder?t.timestamp-o.timestamp:o.timestamp-t.timestamp}));this.tableData=n.slice(o,o+this.pageSize)},changePageSize:function(t){this.pageSize=t,this.changePage(this.currentPage)},changeSort:function(t){this.timeOrder=t.order,this.changePage(this.currentPage)}})},l=c,g=o("2877"),u=Object(g["a"])(l,n,a,!1,null,null,null);e["default"]=u.exports}}]);